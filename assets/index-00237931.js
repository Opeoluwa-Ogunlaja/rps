var h=Object.defineProperty;var g=(s,e,t)=>e in s?h(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var r=(s,e,t)=>(g(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(n){if(n.ep)return;n.ep=!0;const c=t(n);fetch(n.href,c)}})();class i{constructor(e,t=[]){r(this,"enable",()=>{this.disabled=!1});r(this,"disable",()=>{this.disabled=!0});r(this,"reset",()=>{});r(this,"render",()=>{const e=document.createElement("div");return e.classList.add("tile"),e.appendChild(this.element),this.element.onclick=()=>{this.disabled||this.game.choose(this.name)},e});r(this,"beats",e=>e==this.name?"draw":this.beatsArray.includes(e));this.name=e,this.beatsArray=t,this.element=document.createElement("button"),this.element.classList.add(e),this.element.innerHTML=`<img src="images/icon-${this.name}.svg" alt="${this.name} Icon">`,this.game=null,this.disabled=!1}}const u=(s,e)=>localStorage.getItem(s)==null?typeof e=="function"?(localStorage.setItem(s,JSON.stringify(e())),e()):(localStorage.setItem(s,JSON.stringify(e)),e):JSON.parse(localStorage.getItem(s)),f=(s,e)=>{const t=u(s,null);let o;typeof e=="function"?(o=e(t),localStorage.setItem(s,JSON.stringify(o))):localStorage.setItem(s,JSON.stringify(e));const n=new CustomEvent("localstorage",{detail:typeof e=="function"?o:e});return window.dispatchEvent(n),typeof e=="function"?o:e},d=s=>{document.querySelectorAll(".tab").forEach(e=>{e.classList.remove("active")}),document.querySelectorAll(".tab")[s-1].classList.add("active")};class p{constructor(e,t){r(this,"getTile",e=>this.elements.find(t=>t.name==e));r(this,"enableAll",()=>this.elements.forEach(e=>e.enable()));r(this,"disableAll",()=>this.elements.forEach(e=>e.disable()));r(this,"showMessage",e=>{let t=document.getElementById("eval-con"),o=document.getElementById("result");o.innerText=e,t.classList.remove("visually-hidden")});r(this,"evaluate",()=>{switch(this.getTile(this.choice).beats(this.computerChoice)){case"draw":this.showMessage("It's a draw");break;case!0:f("score",e=>e+1),document.getElementById("player_choice").classList.add("winner"),this.showMessage("You win");break;case!1:document.getElementById("com_choice").classList.add("winner"),this.showMessage("You Lose");break}});r(this,"AIPlay",()=>{const e=Math.floor(Math.random()*this.elements.length),t=this.elements[e];this.computerChoice=t.name;const o=()=>{document.getElementById("com_choice").insertAdjacentElement("afterbegin",t.render().cloneNode(!0))};setTimeout(()=>{this.choice!=null&&(o(),setTimeout(this.evaluate,500))},2500)});r(this,"choose",e=>{this.choice=e;const t=this.getTile(e).element.innerHTML;document.getElementById("player_choice").innerHTML=`<div class="tile"><button class="${this.choice}">`+t+"</button></div>",setTimeout(()=>d(2),300),this.disableAll(),this.AIPlay()});r(this,"init",()=>{d(1),this.choice=null,this.computerChoice=null,document.getElementById("com_choice").innerHTML="",document.getElementById("player_choice").innerHTML="",document.getElementById("player_choice").classList.remove("winner"),document.getElementById("com_choice").classList.remove("winner"),document.getElementById("eval-con").className="visually-hidden result",this.enableAll(),this.renderElements()});r(this,"renderElements",()=>{let e=this.elements.map(t=>t.render(this.gameArea));this.gameArea.innerHTML="",e.forEach((t,o)=>{this.elements[o].reset(),this.gameArea.appendChild(t)}),d(1)});this.elements=t,this.elements.forEach(o=>o.game=this),this.gameArea=e,this.choice=null,this.computerChoice=null}}function l(s,e,t,o=!0){const n=c=>e(c);if(t==null||t==null)if(o==!0)window.addEventListener(s,n);else return;else t!=null&&t.addEventListener(s,n)}const y=new i("lizard",["paper","spock"]),b=new i("spock",["scissors","rock"]),E=new i("rock",["lizard","scissors"]),w=new i("paper",["rock","spock"]),I=new i("scissors",["paper","lizard"]),L=[I,b,w,y,E],S=document.querySelector(".tiles_container"),m=new p(S,L);window.onload=function(){m.init();const s=document.getElementById("score");s.innerText=u("score",0),l("localstorage",e=>{typeof e.detail=="number"&&(s.innerText=e.detail)},window),l("click",()=>{document.querySelector("dialog").showModal()},document.getElementById("rules-modal-toggler")),l("click",()=>{document.querySelector("dialog").close()},document.querySelector(".modal-close-btn")),l("click",()=>{m.init()},document.getElementById("play_again_btn"))};
